## squirrelscan audit fixes

Automated fixes from [squirrelscan](https://squirrelscan.com) audit report.

### Fixes applied

| Rule ID | Description | Files changed |
|---------|------------|---------------|
| a11y/duplicate-id-aria | Spread `...props` through all heading components so `id` attributes (e.g. `id="footnote-label"` generated by remark-gfm) are preserved and `aria-labelledby` references resolve correctly | src/components/mdx/mdx-components.tsx |
| a11y/label-content-name-mismatch | Footnote back-reference links rendered visible "↩" but had `aria-label="back to reference N"`. Fixed by rendering the glyph as `aria-hidden` and the label as `sr-only` text, so the accessible name contains the visible character | src/components/mdx/mdx-components.tsx |
| a11y/image-redundant-alt | When the `img` MDX component renders a `<figcaption>` from the alt text, the `<img>` itself now uses `alt=""` (decorative) to avoid screen readers reading the same text twice | src/components/mdx/mdx-components.tsx |
| security/csp | Content-Security-Policy header added in `next.config.ts` covering default-src, script-src (with Vercel Analytics), style-src, font-src, img-src, connect-src, frame-ancestors, base-uri, and form-action | next.config.ts |
| core/meta-description | `/posts` description lengthened from 54 chars to 70+ chars; `/asides` description lengthened from 62 chars to 80+ chars | src/app/posts/page.tsx, src/app/asides/page.tsx |

### Skipped issues

| Rule ID | Description | Reason skipped |
|---------|------------|----------------|
| core/meta-title | Titles on `/posts/onymous-part1` (113 chars) and `/posts/fbi-seizes-fake-tor-hosted-jihad…` (115 chars) are too long; homepage title (69 chars) is slightly over limit | Changing post titles would alter URLs/slugs (violates URL protection policy). Homepage title is set in layout.tsx template — minor tweak can be applied without URL impact but was not reached before budget limit |
| core/meta-description | `/subscribe` (115 chars) and `/posts/craig-wright-is-not-satoshi-nakamoto` (172 chars) descriptions too long | Budget exhausted before completing these two; both are straightforward one-line edits in their respective page files |
| links/https-downgrade | 19 HTTP links in content posts (gavinandresen.ninja/satoshi, mcgrathnicol.com, archive.is, etc.) should be upgraded to HTTPS | Budget exhausted; these are historical post content files — each link should be verified to have an HTTPS equivalent before upgrading |
| links/orphan-pages | /asides, /subscribe, /posts/analyzing-fbi-explanation-silk-road have fewer than 2 incoming links | Budget exhausted; /asides and /subscribe can be added to site-footer nav; the specific post needs related-posts links |
| links/weak-internal-links | /posts/analyzing-fbi-explanation-silk-road has only 1 internal link | Budget exhausted; add a "related posts" section or cross-link from similar posts |
| content/meta-in-body | 16 meta tags found in `<body>` on /asides and /posts | Cannot reproduce with Next.js App Router metadata API — squirrelscan may be detecting OG meta injected by a client component or browser extension; no code path found in source that places meta in body |
| content/word-count | /, /asides, /subscribe, and one post have thin content (<300 words) | Content decisions are editorial, not code fixes |
| content/keyword-stuffing | "wright" at 3.2% density in the Craig Wright post | Inherent to the subject matter of that article; not a code fix |
| eeat/author-byline | No structured author attribution on content pages | Post pages already render "Nik Cubrilovic" in the article header and include JSON-LD author schema. The auditor may expect a rel=author link or specific microdata — budget exhausted before implementing |
| eeat/content-dates | No datePublished detected | JSON-LD on post pages includes datePublished. The auditor may expect a visible `<time>` element with itemprop="datePublished" — already present as `<time dateTime={...}>` in article header; may need itemprop attribute |
| eeat/about-page | No About page found | /about page exists at src/app/[...slug]/page.tsx serving content/pages/about.mdx, and is linked in site-header nav. Auditor crawl may have missed it |
| eeat/contact-page | No Contact page found | /contact page exists at src/app/contact/page.tsx and is linked in site-header nav |
| eeat/privacy-policy | No Privacy Policy page found | /privacy page exists serving content/pages/privacy.mdx and is linked in site-footer. May need the link text to be more explicit |
| perf/lcp-hints | Potential LCP images without preload hints | Next.js Image with priority=true handles preload for featured images; the avatar preload is in layout.tsx <head>. Fine-tuning would require knowing the actual LCP image per page |
| perf/lazy-above-fold | Above-fold images with lazy loading | In mdx-components.tsx, inline `<img>` tags get loading="lazy" but some may be above fold. Fix would require detecting image position, which isn't possible at SSR time without layout hints |
| images/offscreen-lazy | 2 below-fold images without lazy loading on the blockchain post | These are inline `<img>` tags in the MDX source — the mdx-components.tsx img handler already applies loading="lazy" on all external images; may require re-check |
| images/responsive-size | Avatar image (56x56) served without srcset | The avatar uses Next.js `<Image>` with priority which generates srcset automatically; auditor may be detecting a cached version |
| perf/dom-size | Large DOM (2113 nodes) on /posts/onymous-part1 | Content-length issue; the post has 276 list items. Not fixable without changing content |
| perf/critical-request-chains | 2 critical request chains (CSS + JS chunks) | Next.js build artifact optimization; not fixable in source code |
| perf/ttfb | Slow server response on several pages | Hosting/infrastructure issue, not fixable in source code |
| a11y/color-contrast | Multiple potential contrast issues with muted-foreground elements | Requires design system changes; muted-foreground is a Tailwind/shadcn token |
| a11y/identical-links-same-purpose | "wired" and "the bbc" link text pointing to different URLs | Historical content — the Craig Wright article legitimately links to multiple different Wired/BBC articles |
| crawl/canonical-chain | Canonical chain warning on / | Server-level redirect behavior; not fixable in source code |
| crawl/sitemap-coverage | 34 sitemap URLs not crawled | Older posts that squirrelscan did not reach in the crawl budget; not a code issue |
| url/length | /posts/fbi-seizes-fake-tor-hosted-jihad-funding-website… is 121 chars | Changing the URL would break existing links; skipped per URL protection policy |

### Validation

- [ ] Tests pass (no test suite found)
- [ ] Lint passes (eslint configured but not run due to budget constraints)
- [ ] Build passes (not run due to budget constraints)
- [x] No URLs/slugs/routes were changed
